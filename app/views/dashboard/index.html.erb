<%= javascript_pack_tag 'application' %>
<form data-controller="hello" method="get">
  <input data-target="hello.output" type="number" name="snowball">
  <button data-action='click->hello#calculateSnowball' type="button" name="button">Calculate</button>
</form>
<h1>Your debt payoff schedule</h1>
<div class="container">
  <table class="table table-striped">
    <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <th>Current Balance</th>
        <th>Interest Rate</th>
        <th>Minimum Payment</th>
        <th>Snowball</th>
        <th>Total Payment</th>
        <th>Payoff Date</th>
      </tr>
    </thead>
    <tbody>
  <% @accounts.each_with_index do |account, index| %>
  <section id= "account-<%= account.id %>">
    <tr>
        <td><%= account.name %></td>
        <td><%= number_to_currency(account.balance) %></td>
        <td><%= number_to_percentage(account.interest_rate, precision: 2) %></td>
        <td><%= number_to_currency(account.min_payment) %></td>
        <% if index == 0 %>
          <td id='snowball-<%= account.id %>'><%= number_to_currency(account.snowball) %></td>
          <td id='total_payment-<%= account.id %>'><%= number_to_currency(account.min_payment + account.snowball) %></td>
        <% else %>
          <td id='snowball-<%= account.id %>'><%= number_to_currency(0) %></td>
          <td id='total_payment-<%= account.id %>'><%= number_to_currency(account.min_payment) %></td>
        <% end %>
        <td id='payoff_date-<%= account.id %>'><%= account.payoff_date %></td>
    </tr>
  </section>
  <% end %>
</tbody>
</table>
</div>
